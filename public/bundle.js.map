{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://browser-game/./src/front-end/consts/config.const.ts","webpack://browser-game/./src/front-end/controls.ts","webpack://browser-game/./src/front-end/enums/colors.enum.ts","webpack://browser-game/./src/front-end/renderer.ts","webpack://browser-game/webpack/bootstrap","webpack://browser-game/webpack/runtime/define property getters","webpack://browser-game/webpack/runtime/hasOwnProperty shorthand","webpack://browser-game/webpack/runtime/make namespace object","webpack://browser-game/./src/front-end/index.ts"],"sourcesContent":["export const Config = {\r\n    screenHeight: 600,\r\n    screenWidth: 600\r\n}","export class Controls {\r\n    private static instance: typeof Controls.prototype;\r\n\r\n    public static getInstance(): typeof Controls.prototype {\r\n        if (!Controls.instance) {\r\n            Controls.instance = new Controls();\r\n        }\r\n\r\n        return Controls.instance;\r\n    }\r\n\r\n    constructor() { }\r\n\r\n    init(socket: any): void {\r\n        this.initMovement(socket);\r\n    }\r\n\r\n    initMovement(socket: any): void {\r\n        let left = 0;\r\n        let right = 0;\r\n        let up = 0;\r\n        let down = 0;\r\n\r\n        document.addEventListener('keydown', (event) => {\r\n            switch (event.key) {\r\n                case 'a':\r\n                    left = -1;\r\n                    break;\r\n                case 'd':\r\n                    right = 1;\r\n                    break;\r\n                case 'w':\r\n                    up = -1;\r\n                    break;\r\n                case 's':\r\n                    down = 1;\r\n                    break;\r\n            }\r\n\r\n            socket.emit('velocityChange', { x: left + right, y: up + down });\r\n        });\r\n\r\n        document.addEventListener('keyup', (event) => {\r\n            switch (event.key) {\r\n                case 'a':\r\n                    left = 0;\r\n                    break;\r\n                case 'd':\r\n                    right = 0;\r\n                    break;\r\n                case 'w':\r\n                    up = 0;\r\n                    break;\r\n                case 's':\r\n                    down = 0;\r\n                    break;\r\n            }\r\n\r\n            socket.emit('velocityChange', { x: left + right, y: up + down });\r\n        });\r\n    }\r\n}\r\n","export enum Colors {\r\n    BgColor = '#231f20',\r\n    PlayerColor = '#c2c2c2',\r\n    ItemColor = '#e66916'\r\n}","import { Colors } from \"./enums/colors.enum\";\r\nimport { Config } from \"./consts/config.const\";\r\nimport { GameStateDto } from \"../shared/models/game-state-dto.model\";\r\n\r\nexport class Renderer {\r\n    private static instance: typeof Renderer.prototype;\r\n\r\n    public static getInstance(): typeof Renderer.prototype {\r\n        if (!Renderer.instance) {\r\n            Renderer.instance = new Renderer();\r\n        }\r\n\r\n        return Renderer.instance;\r\n    }\r\n\r\n    private canvas: HTMLCanvasElement;\r\n    private ctx: CanvasRenderingContext2D;\r\n\r\n    constructor() { }\r\n\r\n    init(): void {\r\n        this.canvas = document.getElementById('canvas') as HTMLCanvasElement;\r\n        this.ctx = this.canvas.getContext('2d');\r\n\r\n        this.canvas.height = Config.screenHeight;\r\n        this.canvas.width = Config.screenWidth;\r\n    }\r\n\r\n    renderGame(state: GameStateDto): void {\r\n        this.renderWorld(state);\r\n        this.renderFood(state);\r\n        this.renderPlayer(state);\r\n    }\r\n\r\n    private renderWorld(state: GameStateDto): void {\r\n        this.ctx.fillStyle = Colors.BgColor;\r\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n        this.ctx.fillStyle = Colors.BgColor;\r\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n\r\n    private renderFood(state: GameStateDto): void {\r\n        const food = state.food[0];\r\n        const sizeW = this.canvas.width / state.gridSize;\r\n        const sizeH = this.canvas.height / state.gridSize;\r\n\r\n        this.ctx.fillStyle = Colors.ItemColor;\r\n        this.ctx.fillRect(food.x * sizeW, food.y * sizeH, sizeW, sizeH);\r\n    }\r\n\r\n    private renderPlayer(state: GameStateDto): void {\r\n        const sizeW = this.canvas.width / state.gridSize;\r\n        const sizeH = this.canvas.height / state.gridSize;\r\n\r\n        state.players.forEach((player) => {\r\n            this.ctx.fillStyle = Colors.PlayerColor;\r\n            this.ctx.fillRect(player.pos.x * sizeW, player.pos.y * sizeH, sizeW, sizeH);\r\n        })\r\n    }\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { GameStateDto } from \"../shared/models/game-state-dto.model\";\r\nimport { Controls } from \"./controls\";\r\nimport { Renderer } from \"./renderer\";\r\n\r\nconst renderer = Renderer.getInstance();\r\nconst controls = Controls.getInstance();\r\n\r\n//@ts-ignore\r\nconst socket = io('/');\r\n\r\nsocket.on('nameRequest', nameResponse);\r\nfunction nameResponse(): void {\r\n    socket.emit('nameResponse', 'MyNickname');\r\n}\r\n\r\nsocket.on('gameState', handleGameState);\r\nfunction handleGameState(gameStateDto: string) {\r\n    const gameState: GameStateDto = JSON.parse(gameStateDto)\r\n    requestAnimationFrame(() => renderer.renderGame(gameState))\r\n}\r\n\r\ncontrols.init(socket);\r\nrenderer.init();"],"names":["Config","screenHeight","screenWidth","Controls","socket","initMovement","left","right","up","down","document","addEventListener","event","key","emit","x","y","instance","Colors","Renderer","canvas","getElementById","ctx","getContext","height","width","state","renderWorld","renderFood","renderPlayer","fillStyle","BgColor","fillRect","food","sizeW","gridSize","sizeH","ItemColor","players","forEach","player","PlayerColor","pos","renderer","getInstance","controls","io","on","nameResponse","handleGameState","gameStateDto","gameState","JSON","parse","requestAnimationFrame","renderGame","init"],"sourceRoot":""}